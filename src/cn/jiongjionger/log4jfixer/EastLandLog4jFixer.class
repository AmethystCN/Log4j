package cn.jiongjionger.log4jfixer;import cn.jiongjionger.log4jfixer.listener.ChatPacketListener;import cn.jiongjionger.log4jfixer.listener.ItemRenameListener;import cn.jiongjionger.log4jfixer.listener.ItemRenameLowVersionListener;import cn.jiongjionger.log4jfixer.utils.Log4jFixerUtils;import com.comphenix.protocol.PacketType;import com.comphenix.protocol.ProtocolLibrary;import com.comphenix.protocol.PacketType.Play.Client;import com.comphenix.protocol.PacketType.Play.Server;import org.bukkit.Bukkit;import org.bukkit.plugin.java.JavaPlugin;public class EastLandLog4jFixer extends JavaPlugin {    private static EastLandLog4jFixer eastLandLog4jFixer;    public EastLandLog4jFixer() {    }    public static EastLandLog4jFixer getInstance() {        return eastLandLog4jFixer;    }    public void onEnable() {        eastLandLog4jFixer = this;        this.registerItemRenameListener();        ProtocolLibrary.getProtocolManager().addPacketListener(new ChatPacketListener(this, new PacketType[]{Server.CHAT, Client.CHAT}));        if (Log4jFixerUtils.findInterpolator()) {            if (Log4jFixerUtils.tryFix()) {                Bukkit.getLogger().info("[EastLandLog4jFixer] Successfully fixed log4j exploit!");            } else {                Bukkit.getLogger().warning("[EastLandLog4jFixer] Log4j exploit fix failed!!!");            }        } else {            Bukkit.getLogger().info("[EastLandLog4jFixer] Your server doesn't need to fix log4j exploit :)");        }    }    private void registerItemRenameListener() {        try {            Class.forName("org.bukkit.event.inventory.PrepareAnvilEvent");            Bukkit.getPluginManager().registerEvents(new ItemRenameListener(), this);            Bukkit.getLogger().info("[EastLandLog4jFixer] Register PrepareAnvilEvent for item renames.");        } catch (ClassNotFoundException var2) {            Bukkit.getPluginManager().registerEvents(new ItemRenameLowVersionListener(), this);            Bukkit.getLogger().info("[EastLandLog4jFixer] Register InventoryClickEvent for item renames.");        }    }}